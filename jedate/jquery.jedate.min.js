window.console&&(console=console||{log:function(){}}),function(t,e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e():t.jeDate=e(window.jQuery||$)}(this,function(t){function e(t,e){this.opts=e,this.valCell=t,this.init()}var a={},i=document,n="YYYY|MM|DD|hh|mm|ss|zz",s="YYYY|MM|DD|hh|mm|ss|zz".replace("|zz",""),r=function(t){return window.parseInt(t,10)},o={skinCell:"jedateblue",language:{name:"cn",month:["01","02","03","04","05","06","07","08","09","10","11","12"],weeks:["日","一","二","三","四","五","六"],times:["小时","分钟","秒数"],clear:"清空",today:"今天",yes:"确定",close:"关闭"},trigger:"click",format:"YYYY-MM-DD hh:mm:ss",minDate:"1900-01-01 00:00:00",maxDate:"2099-12-31 23:59:59"};t.fn.jeDate=function(a){return this.each(function(){return new e(t(this),a||{})})},t.extend({jeDate:function(a,i){return t(a).each(function(){return new e(t(this),i||{})})}}),a.isObj=function(t){for(var e in t)return!0;return!1},a.reMacth=function(t){return t.match(/\w+|d+/g)},a.docScroll=function(t){return t=t?"scrollLeft":"scrollTop",i.body[t]|i.documentElement[t]},a.winarea=function(t){return i.documentElement[t?"clientWidth":"clientHeight"]},a.isLeap=function(t){return t%100!=0&&t%4==0||t%400==0},a.getDaysNum=function(t,e){var i=31;switch(r(e)){case 2:i=a.isLeap(t)?29:28;break;case 4:case 6:case 9:case 11:i=30}return i},a.getYM=function(t,e,a){var i=new Date(t,e-1);return i.setMonth(e-1+a),{y:i.getFullYear(),m:i.getMonth()+1}},a.getPrevMonth=function(t,e,i){return a.getYM(t,e,0-(i||1))},a.getNextMonth=function(t,e,i){return a.getYM(t,e,i||1)},a.digit=function(t){return t<10?"0"+(0|t):t},a.IsNum=function(t){return!!/^[+-]?\d*\.?\d*$/.test(t)},a.parse=function(e,i,s){e=e.concat(i);var o={},l=n.split("|");return t.each(e,function(t,e){o[l[t]]=r(e)}),s.replace(new RegExp(n,"g"),function(t,e){return"zz"==t?"00":a.digit(o[t])})},a.checkFormat=function(t){var e=[];return t.replace(new RegExp(n,"g"),function(t,a){e.push(t)}),e.join("-")},a.parseMatch=function(t){var e=t.split(" ");return a.reMacth(e[0])},a.testFormat=function(e,a){var i=["YYYY","MM","DD"],s=[],r=[];return e.replace(new RegExp(n,"g"),function(t,e){s.push(t)}),t.each(i,function(e,a){t.each(s,function(t,e){a==e&&r.push(e)})}),("hh"==e.substring(0,2)?s.join("-"):r.join("-"))==a},a.checkDate=function(t){var e=a.reMacth(t);if(isNaN(e[0])||isNaN(e[1])||isNaN(e[2]))return!1;if(e[1]>12||e[1]<1)return!1;if(e[2]<1||e[2]>31)return!1;if((4==e[1]||6==e[1]||9==e[1]||11==e[1])&&e[2]>30)return!1;if(2==e[1]){if(e[2]>29)return!1;if((e[0]%100==0&&e[0]%400!=0||e[0]%4!=0)&&e[2]>28)return!1}return!0},a.returnDate=function(e,i,n){i=i||"YYYY-MM-DD hh:mm:ss";var o=void 0==n||""==n||n==[]?[]:a.reMacth(n),l=[],d=o.length>0?new Date(o[0],o[1],o[2]||0,o[3]||0,o[4]||0,o[5]||0):new Date,h=d.getMonth(),c=d.getDate(),u=[d.getFullYear(),h,c,d.getHours(),d.getMinutes(),d.getSeconds()];t.each(s.split("|"),function(t,a){l.push(e[a]||"")});var m=new Date(u[0]+r(l[0]||0),u[1]+r(l[1]||0),u[2]+r(l[2]||0),u[3]+r(l[3]||0),u[4]+r(l[4]||0),u[5]+r(l[4]||0));return a.parse([m.getFullYear(),a.digit(m.getMonth()+1),a.digit(m.getDate())],[a.digit(m.getHours()),a.digit(m.getMinutes()),a.digit(m.getSeconds())],i)},a.isValHtml=function(t){return/textarea|input/.test(t[0].tagName.toLocaleLowerCase())},a.isBool=function(t){return void 0==t||1==t},a.sortDate=function(e,i){var n={},r=[],o=s.split("|"),l="hh"==a.checkFormat(i).substring(0,2),d=a.IsNum(e)?a.reMacth(l?e.replace(/(.{2})/g,"$1,"):e.substr(0,4).replace(/^(\d{4})/g,"$1,")+e.substr(4).replace(/(.{2})/g,"$1,")):a.reMacth(e),h=a.IsNum(e)?a.reMacth(l?i.replace(/(.{2})/g,"$1,"):i.substr(0,4).replace(/^(\w{4})/g,"$1,")+i.substr(4).replace(/(.{2})/g,"$1,")):a.reMacth(i);return t.each(d,function(t,e){n[h[t]]=e}),t.each(d,function(t,e){var a=l?o[3+t]:o[t];r.push(n[a])}),a.IsNum(e)?a.reMacth(l?e.replace(/(.{2})/g,"$1,"):e.substr(0,4).replace(/^(\d{4})/g,"$1,")+e.substr(4).replace(/(.{2})/g,"$1,")):r};var l=function(){for(var t="",e=[1,2,3,4,5,6,7,8,9,0],a=0;a<8;a++)t+=e[Math.round(Math.random()*(e.length-1))];return t},d=e.prototype,h="jefixed";return d.init=function(){var e=this,i=e.opts,n=new Date,s=void 0!=i.trigger?i.trigger:o.trigger,r=void 0==i.zIndex?2099:i.zIndex,d=void 0!=i.isinitVal&&0!=i.isinitVal;a.fixed=a.isBool(i.fixed);var h=void 0==i.fixedCell||""==i.fixedCell?"":"#"+this.opts.fixedCell,c=function(t){var e,s=i.format||o.format,r=i.initAddVal||{},l=i.hmsSetVal||{};e=a.isObj(l)?a.parse([n.getFullYear(),a.digit(n.getMonth()+1),a.digit(n.getDate())],[a.digit(l.hh),a.digit(l.mm),a.digit(l.ss)],s):a.returnDate(r,s),""==(t.val()||t.text())?a.isValHtml(t)?t.val(e):t.text(e):a.isValHtml(t)?t.val():t.text()},u=function(n,s){var l=t("<div/>",{id:s.replace(/\#/g,""),class:"jedatebox "+(i.skinCell||o.skinCell)}),d=t(h).length>0?"relative":1==a.fixed?"absolute":"fixed";l.attr("author","chen guojun").css({"z-index":"#jedatebox"!=s?"":r,position:d,display:"block"}),"#jedatebox"!=s&&l.attr({jeformat:i.format||o.format,jefixed:h}),a.minDate=i.minDate||o.minDate,a.maxDate=i.maxDate||o.maxDate,t(n).append(l),e.setHtml(i,s)};if(d&&0!=s&&e.valCell.each(function(){c(t(this))}),t(h).length>0){var m="#jedatebox"+l();u(h,m)}else{var f=["body","#jedatebox"];0!=s?e.valCell.on(s,function(e){e.stopPropagation(),t(f[1]).length>0||u(f[0],f[1])}):u(f[0],f[1])}},d.setHtml=function(e,i){a.boxelem=t(t(i).attr(h)).length>0?i:"#jedatebox",a.format=t(t(i).attr(h)).length>0?t(a.boxelem).attr("jeformat"):e.format||o.format,a.formatType=a.checkFormat(a.format);var n=this,s=t(a.boxelem),r=a.testFormat(a.format,"YYYY-MM"),l=a.testFormat(a.format,"YYYY"),d='<div class="jedatetop"></div><div class="jedatetopym" style="display: none;"><ul class="ymdropul"></ul></div><ol class="jedaol"></ol><ul class="'+(r||l?l?"jedayy":"jedaym":"jedaul")+'"></ul><div class="jedateprophms"></div><div class="jedatebot"></div>';s.empty().append(d),n.generateHtml(e,s)},d.isContainhh=function(t){var e=a.checkFormat(t);return a.reMacth("hh-"+e.split("hh")[1])},d.generateHtml=function(e,i){var n,s=this,l=s.valCell,d="",c=new Date,u=e.language||o.language,m=a.testFormat(a.format,"YYYY-MM"),f=a.testFormat(a.format,"YYYY"),g="hh"==a.format.substring(0,2),p=i.find(".jedatetop"),v=i.find(".jedatetopym"),y=i.find(".jedaol"),j=i.find(".jedateprophms"),D=i.find(".jedatebot");if(""==(l.val()||l.text()))n=[c.getFullYear(),c.getMonth()+1,c.getDate(),c.getHours(),c.getMinutes(),c.getSeconds()],a.currDate=new Date(n[0],r(n[1])-1,n[2],n[3],n[4],n[5]),a.ymdDate=n[0]+"-"+a.digit(n[1])+"-"+a.digit(n[2]);else{var M=a.isValHtml(l)?l.val():l.text(),x=a.sortDate(M,a.format);g?(n=[c.getFullYear(),c.getMonth()+1,c.getDate(),x[0],x[1]||c.getMinutes(),x[2]||c.getSeconds()],a.currDate=new Date(c.getFullYear(),c.getMonth()-1,c.getDate())):(n=[x[0],void 0==x[1]?c.getMonth()+1:x[1],void 0==x[2]?c.getDate():x[2],void 0==x[3]?c.getHours():x[3],void 0==x[4]?c.getMinutes():x[4],void 0==x[5]?c.getSeconds():x[5]],a.currDate=new Date(n[0],r(n[1])-1,n[2],n[3],n[4],n[5]),a.ymdDate=n[0]+"-"+a.digit(n[1])+"-"+a.digit(n[2]))}var Y='<div class="jedatepropcon"><div class="jedatehmstitle">'+("cn"==u.name?"时间选择":"Time to choose")+'<div class="jedatehmsclose">&times;</div></div><div class="jedateproptext">'+u.times[0]+'</div><div class="jedateproptext">'+u.times[1]+'</div><div class="jedateproptext">'+u.times[2]+'</div><div class="jedatehmscon jedateprophours"></div><div class="jedatehmscon jedatepropminutes"></div><div class="jedatehmscon jedatepropseconds"></div></div>',b='<div class="botflex jedatehmsshde"><ul class="jedatehms"><li><input type="text" maxlength="2" numval="23" hms="0"></li><i>:</i><li><input type="text" maxlength="2" numval="59" hms="1"></li><i>:</i><li><input type="text" maxlength="2" numval="59" hms="2"></li></ul></div><div class="botflex jedatebtn"><span class="jedateok">'+u.yes+'</span><span class="jedatetodaymonth">'+u.today+'</span><span class="jedateclear">'+u.clear+"</span></div>",w='<p><span class="jedateymchle">&lt;&lt;</span><span class="jedateymchri">&gt;&gt;</span><span class="jedateymchok">'+u.close+"</span></p>";if(g?i.children(".jedatetop,.jedatetopym,.jedaol,.jedaul").remove():p.append('<div class="jedateym" style="width:50%;"><i class="prev triangle monthprev"></i><span class="jedatemm" ym="12"><em class="jedatemonth"></em><em class="pndrop"></em></span><i class="next triangle monthnext"></i></div><div class="jedateym" style="width:50%;"><i class="prev triangle yearprev"></i><span class="jedateyy" ym="24"><em class="jedateyear"></em><em class="pndrop"></em></span><i class="next triangle yearnext"></i></div>'),m||f?(i.children(".jedatetopym,.jedaol").remove(),D.find(".jedatetodaymonth").hide(),p.children().css({width:"100%"}).first().remove(),p.children().find(".pndrop").remove(),i.find(m?".jedaym":".jedayy").append(s.eachYM(e,n[0],n[1],i))):(v.append(w),y.append(function(){return t.each(u.weeks,function(t,e){d+='<li class="weeks" data-week="'+e+'">'+e+"</li>"}),d})),D.append(b),a.isBool(e.isClear)||D.find(".jedateclear").hide(),m||f||g?D.find(".jedatetodaymonth").hide():a.isBool(e.isToday)||D.find(".jedatetodaymonth").hide(),a.isBool(e.isok)||D.find(".jedateok").hide(),/\DD/.test(a.format)&&s.createDaysHtml(n[0],n[1],e,i),/\hh/.test(a.format)){j.append(Y).addClass(g?"jedatepropfix":"jedateproppos").css({display:g?"block":"none"});var F=s.isContainhh(a.format),k=e.hmsSetVal||{},C=""==(l.val()||l.text())&&a.isObj(k)?k:{hh:n[3],mm:n[4],ss:n[5]};t.each(["hh","mm","ss"],function(t,i){var n=void 0==F[t]||"zz"==F[t],s=D.find("input[hms="+t+"]");s.val(n?"00":a.digit(C[i])).attr("readOnly",!a.isBool(e.ishmsVal)),0!=F.length&&n&&s.attr("disabled",!0)})}else D.find(".jedatehmsshde").hide(),D.find(".jedatebtn").css({width:"100%"});if(a.isBool(e.isTime)||(D.find(".botflex").css({width:"100%"}),D.find(".jedatehmsshde").hide()),s.eventsDate(e,i),0==t(t(a.boxelem).attr(h)).length){var H=e.position||[];H.length>0?i.css({top:H[0],left:H[1]}):s.orien(i,l)}setTimeout(function(){e.success&&e.success(l)},50)},d.createDaysHtml=function(e,i,n,s){var l=this,d=r(e),h=r(i),c="",u=0,m=n.language||o.language,f=n.isvalid||[],g=a.reMacth(a.minDate),p=g[0]+g[1]+g[2],v=a.reMacth(a.maxDate),y=v[0]+v[1]+v[2],j=new Date(d,h-1,1).getDay()||7,D=a.getDaysNum(d,h),M=a.getPrevMonth(d,h),x=a.getDaysNum(d,M.m),Y=a.getNextMonth(d,h),b=a.currDate.getFullYear()+"-"+a.digit(a.currDate.getMonth()+1)+"-"+a.digit(1),w=d+"-"+a.digit(h)+"-"+a.digit(1);s.find(".jedateyear").attr("year",d).text(d+("cn"==m.name?"年":"")),s.find(".jedatemonth").attr("month",h).text(h+("cn"==m.name?"月":""));var F=function(e,i,s){var r=n.marks;return t.isArray(r)&&r.length>0&&function(t,e){for(var a=t.length;a--;)if(t[a]===e)return!0;return!1}(r,e+"-"+a.digit(i)+"-"+a.digit(s))?'<i class="marks"></i>':""},k=function(t,e,a){var i;if(1==n.festival&&"cn"==m.name){var s=jeLunar(t,e-1,a),r=s.solarFestival||s.lunarFestival;i='<p><span class="solar">'+a+'</span><span class="lunar">'+(""!=(r&&s.jieqi)?r:s.jieqi||s.showInLunar)+"</span></p>"}else i='<p class="nolunar">'+a+"</p>";return i},C=function(t,e,i,n){var s=(t+"-"+a.digit(e)+"-"+a.digit(i)).replace(/\-/g,"");if(n){if(r(s)>=r(p)&&r(s)<=r(y))return!0}else if(r(p)>r(s)||r(y)<r(s))return!0};if(f.length>0)var H=new RegExp(f[0].replace(/,/g,"|"));for(var L=x-j+1;L<=x;L++,u++){var I,z=F(M.y,M.m,L);I=f.length>0?C(M.y,M.m,L,!1)?"disabled":H.test(L)?1==f[1]?"other":"disabled":1==f[1]?"disabled":"other":C(M.y,M.m,L,!1)?"disabled":"other",c+='<li data-ymd="'+M.y+"-"+M.m+"-"+L+'" class='+I+">"+(k(M.y,M.m,L)+z)+"</li>"}for(var N=1;N<=D;N++,u++){var S="",V=F(d,h,N),q=d+"-"+a.digit(h)+"-"+a.digit(N);"action"==(S=C(d,h,N,!0)?f.length>0?a.ymdDate==q?a.ymdDate==q?"action":b!=w&&w==q?"action":"":H.test(N)?1==f[1]?"":"disabled":1==f[1]?"disabled":"":a.ymdDate==q?"action":b!=w&&w==q?"action":"":"disabled")&&s.children("ul").attr("dateval",d+"-"+h+"-"+N),c+='<li data-ymd="'+d+"-"+h+"-"+N+'" class='+(""!=S?S:"")+">"+(k(d,h,N)+V)+"</li>"}for(var P=1,T=42-u;P<=T;P++){var $,B=F(Y.y,Y.m,P);$=f.length>0?C(Y.y,Y.m,P,!1)?"disabled":H.test(P)?1==f[1]?"other":"disabled":1==f[1]?"disabled":"other":C(Y.y,Y.m,P,!1)?"disabled":"other",c+='<li data-ymd="'+Y.y+"-"+Y.m+"-"+P+'" class='+$+">"+(k(Y.y,Y.m,P)+B)+"</li>"}s.find(".jedaul").empty().html(c),l.chooseDays(n,s)},d.eachStrhms=function(e,i){var n=this,s=[],r=void 0==a.minDate.split(" ")[1]?"00:00:00":a.minDate.split(" ")[1],o=void 0==a.maxDate.split(" ")[1]?"00:00:00":a.maxDate.split(" ")[1],l=a.reMacth(r),d=a.reMacth(o);return t.each([24,60,60],function(t,r){for(var o="",h=n.isContainhh(a.format),c=i.find(".jedatehms input").eq(t).val(),u=0;u<r;u++)u=a.digit(u),o+='<p class="'+(a.isBool(e.hmsLimit)?0==h.length||void 0!=h[t]&&"zz"!=h[t]?c==u?"action":"":"disabled":u<l[t]||u>d[t]?u==c?"disabled action":"disabled":u==c?"action":"")+'">'+u+"</p>";s.push(o)}),s},d.eachYM=function(e,i,n,s){var l,d="",h=e.language||o.language,c=this.valCell,u=new Date;return a.testFormat(a.format,"YYYY")?(a.yearArr=new Array(15),t.each(a.yearArr,function(t){var e=a.parseMatch(a.minDate),n=a.parseMatch(a.maxDate),o=e[0],l=n[0],h=i-7+t,m=a.reMacth(a.isValHtml(c)?c.val():c.text()),f=""==(c.val()||c.text())?u.getFullYear():m[0];d+=h<o||h>l?"<li class='disabled' yy='"+h+"'>"+h+"</li>":"<li class='"+(r(f)==h?"action":"")+"' yy='"+h+"'>"+h+"</li>",r(f)==h&&s.children("ul").attr("dateval",h)}),l=i):(t.each(h.month,function(t,e){var r=a.parseMatch(a.minDate),o=a.parseMatch(a.maxDate),l=new Date(i,a.digit(e),"01"),h=new Date(r[0],r[1],r[2]),c=new Date(o[0],o[1],o[2]);d+=l<h||l>c?"<li class='disabled' ym='"+i+"-"+a.digit(e)+"'>"+i+"-"+a.digit(e)+"</li>":"<li class='"+(n==e?"action":"")+"' ym='"+i+"-"+a.digit(e)+"'>"+i+"-"+a.digit(e)+"</li>",n==e&&s.children("ul").attr("dateval",i+"-"+a.digit(e))}),l=i+"-"+a.digit(n)),s.find(".jedatetop .jedateyear").text(l),d},d.orien=function(t,e,i){var n,s,r,o,l=a.fixed?e[0].getBoundingClientRect():t[0].getBoundingClientRect();a.fixed?(s=l.right+t.outerWidth()/1.5>=a.winarea(1)?l.right-t.outerWidth():l.left+(i?0:a.docScroll(1)),n=l.bottom+t.outerHeight()/1<=a.winarea()?l.bottom-1:l.top>t.outerHeight()/1.5?l.top-t.outerHeight()-1:a.winarea()-t.outerHeight(),r=Math.max(n+(i?0:a.docScroll())+1,1)+"px",o=s+"px"):(r="50%",o="50%",t.css({"margin-top":-l.height/2,"margin-left":-l.width/2})),t.css({top:r,left:o})},d.lunarOrien=function(t,e,i){var n,s,r,o,l=e[0].getBoundingClientRect();return s=l.right+t[0].offsetWidth/1.5>=a.winarea(1)?l.right-t[0].offsetWidth:l.left+(i?0:a.docScroll(1)),n=l.bottom+t[0].offsetHeight/1<=a.winarea()?l.bottom-1:l.top>t[0].offsetHeight/1.5?l.top-t[0].offsetHeight-1:a.winarea()-t[0].offsetHeight,r=Math.max(n+(i?0:a.docScroll())+1,1)+"px",o=s+"px",{top:r,left:o}},d.dateClose=function(){0==t(t(a.boxelem).attr(h)).length&&t(a.boxelem).remove()},d.eventsDate=function(e,i){var n=this,s=n.valCell,l=e.language||o.language,d="hh"==a.checkFormat(a.format).substring(0,2);if(d||n.chooseYearMonth(e,i),(a.testFormat(a.format,"YYYY")||a.testFormat(a.format,"YYYY-MM"))&&(n.preNextYearMonth(e,i),n.onlyYMevents(e,i)),/\hh/.test(a.format)){var c=i.find(".jedateprophours"),u=i.find(".jedatepropminutes"),m=i.find(".jedatepropseconds"),f=i.find(".jedateprophms"),g=155,p=function(){var s=n.eachStrhms(e,i),r=n.isContainhh(a.format);f.css("display","block"),t.each([c,u,m],function(t,e){""==e.html()&&e.html(s[t])}),t.each(["hours","minutes","seconds"],function(e,n){var s=i.find(".jedateprop"+n),o=s.find(".action"),l=s.find("p");0!=r.length&&void 0!=r[e]&&"zz"!=r[e]&&(s[0].scrollTop=o[0].offsetTop-g),l.on("click",function(){var n=t(this);n.hasClass("disabled")||(n.addClass("action").siblings().removeClass("action"),i.find(".jedatebot .jedatehms input").eq(e).val(a.digit(n.text())),d||i.find(".jedateprophms").hide())})})};d?(p(),f.find(".jedatehmsclose").css("display","none")):i.find(".jedatehms").on("click",function(){p(),!d&&f.find(".jedatehmsclose").on("click",function(){f.css("display","none")})})}i.find(".jedatehms input").on("keyup",function(){var e=t(this),s=e.val(),o=n.isContainhh(a.format),d=r(e.attr("numval")),h=r(e.attr("hms"));if(e.val(s.replace(/\D/g,"")),s>d){e.val(d);var c="cn"==l.name?"输入值不能大于 ":"The input value is not greater than ";alert(c+d)}""==s&&e.val("00"),i.find(".jedatehmscon").eq(h).children().each(function(){t(this).removeClass("action")}),i.find(".jedatehmscon").eq(h).children().eq(r(e.val().replace(/^0/g,""))).addClass("action"),t.each(["hours","minutes","seconds"],function(t,e){var a=i.find(".jedateprop"+e),n=a.find(".action");0!=o.length&&void 0!=o[t]&&(a[0].scrollTop=n[0].offsetTop-g)})}),i.find(".jedatebot .jedateclear").on("click",function(i){i.stopPropagation();var r=a.isValHtml(s)?s.val():s.text();a.isValHtml(s)?s.val(""):s.text(""),n.dateClose(),""!=r&&(a.isBool(e.clearRestore)&&(a.minDate=e.startMin||a.minDate,a.maxDate=e.startMax||a.maxDate),(t.isFunction(e.clearfun)||null!=e.clearfun)&&e.clearfun(s,r))}),i.find(".jedatebot .jedatetodaymonth").on("click",function(){var r=new Date,o=[r.getFullYear(),r.getMonth()+1,r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds()],l=a.parse([o[0],o[1],o[2]],[o[3],o[4],o[5]],a.format),d=r.getFullYear()+"-"+a.digit(r.getMonth()+1)+"-"+a.digit(r.getDate())+" "+a.digit(r.getHours())+":"+a.digit(r.getMinutes())+":"+a.digit(r.getSeconds());if(a.isValHtml(s)?s.val(l):a.text(l),t(i.attr(h)).length>0){var c="#"+i.attr("id");n.setHtml(e,c)}n.dateClose(),(t.isFunction(e.choosefun)||null!=e.choosefun)&&e.choosefun(s,l,d)}),i.find(".jedatebot .jedateok").on("click",function(o){o.stopPropagation();var l=new Date,c=function(){var e=[];return i.find(".jedatehms input").each(function(){void 0===t(this).attr("disabled")&&e.push(t(this).val())}),e}(),u=d?[l.getFullYear(),l.getMonth()+1,l.getDate()]:a.reMacth(i.children("ul").attr("dateval")),m=t(t(a.boxelem).attr(h)).length>0?i.attr("jeformat"):a.format,f=a.parse([r(u[0]),r(u[1]),r(u[2])],[c[0]||0,c[1]||0,c[2]||0],m),g=(u[0]||l.getFullYear())+"-"+a.digit(u[1]||l.getMonth()+1)+"-"+a.digit(u[2]||l.getDate())+" "+a.digit(c[0]||0)+":"+a.digit(c[1]||0)+":"+a.digit(c[2]||0);a.isValHtml(s)?s.val(f):s.text(f),n.dateClose(),(t.isFunction(e.okfun)||null!=e.okfun)&&e.okfun(s,f,g)}),t(document).on("mouseup scroll",function(i){if(i.stopPropagation(),("scroll"!==i.type||a.isBool(e.hideByScroll))&&"#jedatebox"==a.boxelem){var n=t(a.boxelem);n&&"none"!==n.css("display")&&n.remove(),t("#jedatetipscon").length>0&&t("#jedatetipscon").remove()}}),t(a.boxelem).on("mouseup",function(t){t.stopPropagation()})},d.chooseDays=function(e,i){var n=this,s=n.valCell,l=new Date,c=e.language||o.language;i.find(".jedaul li").on("click",function(r){var o=t(i.attr(h)).length>0?i.attr("jeformat"):a.format,d=t(this),c=[];if(!d.hasClass("disabled")){r.stopPropagation(),i.find(".jedatehms input").each(function(){c.push(t(this).val())});var u=a.reMacth(d.attr("data-ymd")),m=a.parse([u[0],u[1],u[2]],[c[0],c[1],c[2]],o),f=(u[0]||l.getFullYear())+"-"+a.digit(u[1]||l.getMonth()+1)+"-"+a.digit(u[2]||l.getDate())+" "+a.digit(c[0])+":"+a.digit(c[1])+":"+a.digit(c[2]);if(a.isValHtml(s)?s.val(m):s.text(m),t(i.attr(h)).length>0){var g="#"+i.attr("id");n.setHtml(e,g)}else n.dateClose();e.festival&&t("#jedatetipscon").remove(),(t.isFunction(e.choosefun)||null!=e.choosefun)&&e.choosefun&&e.choosefun(s,m,f)}}),e.festival&&"cn"==c.name&&i.find(".jedaul li").on("mouseover",function(){var i=t(this),n=a.reMacth(i.attr("data-ymd")),s=t("<div/>",{id:"jedatetipscon",class:"jedatetipscon"}),o=jeLunar(r(n[0]),r(n[1])-1,r(n[2])),l="<p>"+o.solarYear+"年"+o.solarMonth+"月"+o.solarDate+"日 "+o.inWeekDays+'</p><p class="red">农历：'+o.shengxiao+"年 "+o.lnongMonth+"月"+o.lnongDate+"</p><p>"+o.ganzhiYear+"年 "+o.ganzhiMonth+"月 "+o.ganzhiDate+"日</p>",h=""!=(o.solarFestival||o.lunarFestival)?'<p class="red">节日：'+o.solarFestival+o.lunarFestival+"</p>":"",c=""!=o.jieqi?'<p class="red">'+(""!=o.jieqi?"节气："+o.jieqi:"")+"</p>":"",u=""!=(o.solarFestival||o.lunarFestival||o.jieqi)?h+c:"";t("body").append(s),s.html(l+u);var m=d.lunarOrien(s,i);s.css({"z-index":void 0==e.zIndex?2104:e.zIndex+5,top:m.top,left:m.left,position:"absolute",display:"block"})}).on("mouseout",function(){t("#jedatetipscon").length>0&&t("#jedatetipscon").remove()})},d.chooseYearMonth=function(e,i){var n=this,s=i.find(".yearprev"),l=i.find(".yearnext"),d=i.find(".monthprev"),h=i.find(".monthnext"),c=i.find(".jedatetopym"),u=i.find(".jedateyy"),m=i.find(".jedatemm"),f=i.find(".jedateyy .jedateyear"),g=i.find(".jedatemm .jedatemonth"),p=e.language||o.language,v=i.find(".jedateymchri"),y=i.find(".jedateymchle"),j=a.reMacth(a.minDate),D=j[0]+j[1],M=a.reMacth(a.maxDate),x=M[0]+M[1],Y=function(e){var a,i="";return t.each(new Array(15),function(t,n){if(7===t){var s=f.attr("year");a=r(e)>=r(j[0])&&r(e)<=r(M[0])?s==e?'class="action"':"":'class="disabled"',i+="<li "+a+' yy="'+e+'">'+e+("cn"==p.name?"年":"")+"</li>"}else a=r(e-7+t)>=r(j[0])&&r(e-7+t)<=r(M[0])?"":'class="disabled"',i+="<li "+a+' yy="'+(e-7+t)+'">'+(e-7+t)+("cn"==p.name?"年":"")+"</li>"}),i},b=function(e,n){var s="";12==n?(t.each(p.month,function(t,e){var i=g.attr("month"),e=a.digit(e),n=r(f.attr("year")+e)>=r(D)&&r(f.attr("year")+e)<=r(x)?a.digit(i)==e?"action":"":"disabled";s+="<li class='"+n+"' mm='"+e+"'>"+e+("cn"==p.name?"月":"")+"</li>"}),t.each([v,y],function(t,e){e.hide()})):(s=Y(e),t.each([v,y],function(t,e){e.show()})),c.removeClass(12==n?"jedatesety":"jedatesetm").addClass(12==n?"jedatesetm":"jedatesety"),i.find(".jedatetopym .ymdropul").html(s),c.show()};t.each([s,l],function(t,a){a.on("click",function(t){if("block"!=i.find(".jedatetopym").css("display")){t.stopPropagation();var o=r(f.attr("year")),l=r(g.attr("month")),d=a==s?--o:++o;n.createDaysHtml(d,l,e,i)}})}),t.each([d,h],function(t,s){s.on("click",function(t){if("block"!=i.find(".jedatetopym").css("display")){t.stopPropagation();var o=r(f.attr("year")),l=r(g.attr("month")),h=a.getPrevMonth(o,l),c=a.getNextMonth(o,l);s==d?n.createDaysHtml(h.y,h.m,e,i):n.createDaysHtml(c.y,c.m,e,i)}})}),t.each([u,m],function(s,o){o.on("click",function(){var s=t(this).attr("ym"),l=r(f.attr("year")),d=function(){i.find(".ymdropul li").on("click",function(s){var l=t(this),d=r(u==o?l.attr("yy"):f.attr("year")),h=u==o?r(g.attr("month")):a.digit(r(l.attr("mm")));l.hasClass("disabled")||(s.stopPropagation(),u==o?f.attr("year",d).html(d+("cn"==p.name?"年":"")):g.attr("month",h).html(h+("cn"==p.name?"月":"")),c.hide(),n.createDaysHtml(d,h,e,i))})};b(l,s),d(),i.find(".jedateymchok").on("click",function(t){t.stopPropagation(),c.hide()}),t.each([y,v],function(t,e){e.on("click",function(e){e.stopPropagation(),0==t?l-=15:l+=15;var a=Y(l);i.find(".jedatetopym .ymdropul").html(a),d()})})})})},d.preNextYearMonth=function(e,i){var n=this,s=n.valCell,r=new Date,o=a.testFormat(a.format,"YYYY");i.find(o?".jedayy li":".jedaym li").on("click",function(i){if(!t(this).hasClass("disabled")){i.stopPropagation();var l=o?a.reMacth(t(this).attr("yy")):a.reMacth(t(this).attr("ym")),d=o?a.parse([l[0],r.getMonth()+1,1],[0,0,0],a.format):a.parse([l[0],l[1],1],[0,0,0],a.format);a.isValHtml(s)?s.val(d):s.text(d),n.dateClose(),(t.isFunction(e.choosefun)||null!=e.choosefun)&&e.choosefun(s,d)}})},d.onlyYMevents=function(e,i){var n,s=this,o=new Date,l=a.testFormat(a.format,"YYYY"),d=i.find(".jedateym .prev"),h=i.find(".jedateym .next"),c=a.reMacth(i.children("ul").attr("dateval")),u=r(c[0]),m=r(c[1]);t.each([d,h],function(t,r){r.on("click",function(t){t.stopPropagation(),l?(n=r==d?i.find(".jedayy li").eq(0).attr("yy"):i.find(".jedayy li").eq(a.yearArr.length-1).attr("yy"),i.find(".jedayy").html(s.eachYM(e,n,o.getMonth()+1,i))):(n=r==d?u-=1:u+=1,i.find(".jedaym").html(s.eachYM(e,n,m,i))),s.preNextYearMonth(e,i)})})},t.dateVer="3.8.2",t.nowDate=function(t,e,i){return e=e||"YYYY-MM-DD hh:mm:ss",i=i||[],"number"==typeof t&&(t={DD:t}),a.returnDate(t,e,i)},t.timeStampDate=function(t,e,i){if(i=i||"YYYY-MM-DD hh:mm:ss",1==e){var n=new Date(1e3*r(t.substring(0,10)));return a.parse([n.getFullYear(),a.digit(n.getMonth()+1),a.digit(n.getDate())],[a.digit(n.getHours()),a.digit(n.getMinutes()),a.digit(n.getSeconds())],i)}var s=a.reMacth(t);return new Date(s[0],s[1],s[2],s[3],s[4],s[5]).getTime().toString().substr(0,10)},t.getLunar=function(t){if(/\YYYY-MM-DD/.test(a.formatType)){var e=t.substr(0,4).replace(/^(\d{4})/g,"$1,")+t.substr(4).replace(/(.{2})/g,"$1,"),i=a.IsNum(t)?a.reMacth(e):a.reMacth(t),n=jeLunar(i[0],i[1]-1,i[2]);return{nMonth:n.lnongMonth,nDays:n.lnongDate,yYear:r(n.solarYear),yMonth:r(n.solarMonth),yDays:r(n.solarDate),cWeek:n.inWeekDays,nWeek:n.solarWeekDay}}},e}),function(t,e){t.jeLunar=function(t){function e(t){var e=function(t,e){return new Date(31556925974.7*(t-1900)+6e4*i[e]+Date.UTC(1900,0,6,2,5)).getUTCDate()},m=function(t){var e,i=348;for(e=32768;e>8;e>>=1)i+=a[t-1900]&e?1:0;return i+g(t)},f=function(t){return n.charAt(t%10)+s.charAt(t%12)},g=function(t){return p(t)?65536&a[t-1900]?30:29:0},p=function(t){return 15&a[t-1900]},v=function(t,e){return a[t-1900]&65536>>e?30:29},y=function(t){var e,a=0,i=0,n=(t-new Date(1900,0,31))/864e5;for(this.dayCyl=n+40,this.monCyl=14,e=1900;e<2050&&n>0;e++)n-=i=m(e),this.monCyl+=12;for(n<0&&(n+=i,e--,this.monCyl-=12),this.year=e,this.yearCyl=e-1864,a=p(e),this.isLeap=!1,e=1;e<13&&n>0;e++)a>0&&e==a+1&&0==this.isLeap?(--e,this.isLeap=!0,i=g(this.year)):i=v(this.year,e),1==this.isLeap&&e==a+1&&(this.isLeap=!1),n-=i,0==this.isLeap&&this.monCyl++;0==n&&a>0&&e==a+1&&(this.isLeap?this.isLeap=!1:(this.isLeap=!0,--e,--this.monCyl)),n<0&&(n+=i,--e,--this.monCyl),this.month=e,this.day=n+1},j=function(t){return t<10?"0"+(0|t):t},D=function(t,e){var a=t;return e.replace(/dd?d?d?|MM?M?M?|yy?y?y?/g,function(t){switch(t){case"yyyy":var e="000"+a.getFullYear();return e.substring(e.length-4);case"dd":return j(a.getDate());case"d":return a.getDate().toString();case"MM":return j(a.getMonth()+1);case"M":return a.getMonth()+1}})};this.isToday=!1,this.isRestDay=!1,this.solarYear=D(t,"yyyy"),this.solarMonth=D(t,"M"),this.solarDate=D(t,"d"),this.solarWeekDay=t.getDay(),this.inWeekDays="星期"+l.charAt(this.solarWeekDay);var M=new y(t);this.lunarYear=M.year,this.shengxiao=r.charAt((this.lunarYear-4)%12),this.lunarMonth=M.month,this.lunarIsLeapMonth=M.isLeap,this.lnongMonth=this.lunarIsLeapMonth?"闰"+h[M.month-1]:h[M.month-1],this.lunarDate=M.day,this.showInLunar=this.lnongDate=function(t,e){var a;switch(e){case 10:a="初十";break;case 20:a="二十";break;case 30:a="三十";break;default:a=d.charAt(Math.floor(e/10)),a+=l.charAt(e%10)}return a}(this.lunarMonth,this.lunarDate),1==this.lunarDate&&(this.showInLunar=this.lnongMonth+"月"),this.ganzhiYear=f(M.yearCyl),this.ganzhiMonth=f(M.monCyl),this.ganzhiDate=f(M.dayCyl++),this.jieqi="",this.restDays=0,e(this.solarYear,2*(this.solarMonth-1))==D(t,"d")&&(this.showInLunar=this.jieqi=o[2*(this.solarMonth-1)]),e(this.solarYear,2*(this.solarMonth-1)+1)==D(t,"d")&&(this.showInLunar=this.jieqi=o[2*(this.solarMonth-1)+1]),"清明"==this.showInLunar&&(this.showInLunar="清明节",this.restDays=1),this.solarFestival=c[D(t,"MM")+D(t,"dd")],void 0===this.solarFestival?this.solarFestival="":/\*(\d)/.test(this.solarFestival)&&(this.restDays=parseInt(RegExp.$1),this.solarFestival=this.solarFestival.replace(/\*\d/,"")),this.showInLunar=""==this.solarFestival?this.showInLunar:this.solarFestival,this.lunarFestival=u[this.lunarIsLeapMonth?"00":j(this.lunarMonth)+j(this.lunarDate)],void 0===this.lunarFestival?this.lunarFestival="":/\*(\d)/.test(this.lunarFestival)&&(this.restDays=this.restDays>parseInt(RegExp.$1)?this.restDays:parseInt(RegExp.$1),this.lunarFestival=this.lunarFestival.replace(/\*\d/,"")),12==this.lunarMonth&&this.lunarDate==v(this.lunarYear,12)&&(this.lunarFestival=u["0100"],this.restDays=1),this.showInLunar=""==this.lunarFestival?this.showInLunar:this.lunarFestival}var a=[19416,19168,42352,21717,53856,55632,91476,22176,39632,21970,19168,42422,42192,53840,119381,46400,54944,44450,38320,84343,18800,42160,46261,27216,27968,109396,11104,38256,21234,18800,25958,54432,59984,28309,23248,11104,100067,37600,116951,51536,54432,120998,46416,22176,107956,9680,37584,53938,43344,46423,27808,46416,86869,19872,42448,83315,21200,43432,59728,27296,44710,43856,19296,43748,42352,21088,62051,55632,23383,22176,38608,19925,19152,42192,54484,53840,54616,46400,46496,103846,38320,18864,43380,42160,45690,27216,27968,44870,43872,38256,19189,18800,25776,29859,59984,27480,21952,43872,38613,37600,51552,55636,54432,55888,30034,22176,43959,9680,37584,51893,43344,46240,47780,44368,21977,19360,42416,86390,21168,43312,31060,27296,44368,23378,19296,42726,42208,53856,60005,54576,23200,30371,38608,19415,19152,42192,118966,53840,54560,56645,46496,22224,21938,18864,42359,42160,43600,111189,27936,44448],i=[0,21208,43467,63836,85337,107014,128867,150921,173149,195551,218072,240693,263343,285989,308563,331033,353350,375494,397447,419210,440795,462224,483532,504758],n="甲乙丙丁戊己庚辛壬癸",s="子丑寅卯辰巳午未申酉戌亥",r="鼠牛虎兔龙蛇马羊猴鸡狗猪",o=["小寒","大寒","立春","雨水","惊蛰","春分","清明","谷雨","立夏","小满","芒种","夏至","小暑","大暑","立秋","处暑","白露","秋分","寒露","霜降","立冬","小雪","大雪","冬至"],l="日一二三四五六七八九十",d="初十廿卅",h=["正","二","三","四","五","六","七","八","九","十","十一","腊"],c={"0101":"*1元旦节","0202":"湿地日","0214":"情人节","0308":"妇女节","0312":"植树节","0315":"消费者权益日","0401":"愚人节","0422":"地球日","0501":"*1劳动节","0504":"青年节","0512":"护士节","0518":"博物馆日","0520":"母亲节","0601":"儿童节","0623":"奥林匹克日","0630":"父亲节","0701":"建党节","0801":"建军节","0903":"抗战胜利日","0910":"教师节",1001:"*3国庆节",1201:"艾滋病日",1224:"平安夜",1225:"圣诞节"},u={"0100":"除夕","0101":"*2春节","0115":"元宵节","0505":"*1端午节","0707":"七夕节","0715":"中元节","0815":"*1中秋节","0909":"*1重阳节",1015:"下元节",1208:"腊八节",1223:"小年"};return function(t,a,i){return new e(new Date(t,a,i))}}(t.jeLunar)}(this);